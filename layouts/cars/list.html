{{ define "main" }}
<div class="catalog-page">

  <!-- Заголовок страницы -->
  <div class="page-header bg-light py-5">
    <div class="container">
      <div class="row align-items-center">
        <div class="col-lg-8">
          <h1 class="display-5 fw-bold text-dark mb-3">{{ .Title }}</h1>
          {{ with .Content }}
          <div class="lead text-muted">{{ . }}</div>
          {{ end }}
        </div>
        <div class="col-lg-4 text-lg-end">
          <div class="catalog-stats">
            <span class="badge bg-white text-dark border px-3 py-2 fs-6">
              <i class="bi bi-collection text-danger me-2"></i>
              {{ len .Pages }} автомобилей
            </span>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Основной контент -->
  <div class="container py-5">

    <!-- Панель фильтров -->
    <div class="filters-panel mb-5">
      <div class="card border-0 shadow-sm rounded-4">
        <div class="card-header bg-white border-0 p-4">
          <div class="d-flex justify-content-between align-items-center">
            <h5 class="mb-0 fw-semibold">
              <i class="bi bi-funnel text-danger me-2"></i>Фильтры поиска
            </h5>
            <button class="btn btn-outline-danger btn-sm rounded-pill"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#filtersCollapse">
              <i class="bi bi-chevron-down me-1"></i>
              <span class="d-none d-sm-inline">Показать фильтры</span>
            </button>
          </div>
        </div>

        <div class="collapse" id="filtersCollapse">
          <div class="card-body p-4 border-top">

            <div class="row g-3 align-items-end">

              <!-- Поиск по названию - самый широкий -->
              <div class="col-lg-4 col-md-6">
                <label class="form-label fw-medium">Поиск автомобиля</label>
                <div class="input-group">
                  <span class="input-group-text bg-light border-end-0">
                    <i class="bi bi-search text-muted"></i>
                  </span>
                  <input type="text"
                         class="form-control border-start-0"
                         placeholder="Введите марку или модель"
                         id="searchInput">
                </div>
              </div>

              <!-- Год -->
              <div class="col-lg-2 col-md-3 col-sm-6">
                <label class="form-label fw-medium">Год от</label>
                <input type="number"
                       class="form-control"
                       placeholder="2020"
                       id="yearFrom"
                       min="2000"
                       max="2025">
              </div>

              <div class="col-lg-2 col-md-3 col-sm-6">
                <label class="form-label fw-medium">до</label>
                <input type="number"
                       class="form-control"
                       placeholder="2025"
                       id="yearTo"
                       min="2000"
                       max="2025">
              </div>

              <!-- Цена -->
              <div class="col-lg-2 col-md-3 col-sm-6">
                <label class="form-label fw-medium">Цена от</label>
                <input type="text"
                       class="form-control price-input"
                       placeholder="1 000 000"
                       id="priceFrom">
              </div>

              <div class="col-lg-2 col-md-3 col-sm-6">
                <label class="form-label fw-medium">до</label>
                <input type="text"
                       class="form-control price-input"
                       placeholder="5 000 000"
                       id="priceTo">
              </div>

            </div>

            <!-- Кнопки и результаты -->
            <div class="row mt-4 align-items-center">
              <div class="col-md-6">
                <div class="d-flex gap-2">
                  <button class="btn btn-danger rounded-pill px-4" onclick="applyFilters()">
                    <i class="bi bi-search me-2"></i>Найти
                  </button>
                  <button class="btn btn-outline-secondary rounded-pill px-4" onclick="clearFilters()">
                    <i class="bi bi-arrow-clockwise me-2"></i>Сбросить
                  </button>
                </div>
              </div>
              <div class="col-md-6 text-md-end mt-3 mt-md-0">
                <span class="results-badge badge bg-light text-dark px-3 py-2" id="resultsCount">
                  Показано: {{ len .Pages }} автомобилей
                </span>
              </div>
            </div>

          </div>
        </div>
      </div>
    </div>

    <!-- Сетка автомобилей -->
    <div class="cars-section">
      <div class="row g-4" id="carsGrid">
        {{ range .Pages }}
          {{ partial "car-card.html" (dict "car" .) }}
        {{ end }}
      </div>

      <!-- Сообщение об отсутствии результатов -->
      <div class="no-results text-center py-5 d-none" id="noResultsMessage">
        <div class="text-muted">
          <i class="bi bi-search display-1 mb-4 opacity-25"></i>
          <h4 class="fw-normal mb-3">Автомобили не найдены</h4>
          <p class="mb-4">Попробуйте изменить параметры поиска или сбросить фильтры</p>
          <button class="btn btn-outline-danger rounded-pill px-4" onclick="clearFilters()">
            <i class="bi bi-arrow-clockwise me-2"></i>Сбросить фильтры
          </button>
        </div>
      </div>
    </div>

  </div>
</div>
{{ end }}
